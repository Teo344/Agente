version: "3.1"
session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true

# ----------------- INTENTS -----------------
intents:
  - agente_saludo
  - consultar_clima
  - ajustar_sensibilidad
  - dar_feedback
  - consultar_historial
  - afirmacion
  - negacion

# ----------------- ENTITIES -----------------
entities:
  - clima_variable
  - sensibilidad_nivel
  - valor
  - unidad
  - periodo_tiempo
  - tipo_feedback

# ----------------- SLOTS (Memoria) -----------------
slots:
  estado_clima_actual:
    type: text
    influence_conversation: false
    mappings:
    - type: from_text
      intent: consultar_clima
  
  umbral_actual:
    type: float
    influence_conversation: true
    mappings:
    - type: custom
  
  clima_variable:
    type: text
    influence_conversation: true
    mappings:
    - type: from_entity
      entity: clima_variable
      
  sensibilidad_nivel:
    type: text
    influence_conversation: true
    mappings:
    - type: from_entity
      entity: sensibilidad_nivel

# ----------------- RESPONSES -----------------
responses:
  utter_saludo:
  - text: "Â¡Hola! Soy tu Agente ClimÃ¡tico HÃ­brido. Monitoreo las condiciones para proteger tu ropa. Â¿CÃ³mo puedo asistirte hoy?"
  
  utter_clima_actual:
  - text: "El estado actual es: {estado_clima_actual}. El umbral de humedad ajustado por el GA es {umbral_actual}%."
  
  utter_alerta_riesgo:
  - text: "ğŸš¨ ALERTA CRÃTICA: La regla lÃ³gica se ha activado. Se detecta ALTO RIESGO (humedad > {umbral_actual}%). Â¡Recoge la ropa tendida de inmediato!"

  utter_solicitar_feedback:
  - text: "Â¿Me gustarÃ­a saber sobre mi Ãºltima alerta? Â¿Fue un acierto o una falsa alarma? Tu feedback ayuda a mi aprendizaje continuo."
  
  utter_confirmacion_ajuste:
  - text: "He enviado la solicitud de ajuste. La sensibilidad para {clima_variable} ha sido marcada a '{sensibilidad_nivel}'. El Algoritmo GenÃ©tico reoptimizarÃ¡ los umbrales pronto."
  
  utter_agradecimiento_feedback:
  - text: "Gracias por la retroalimentaciÃ³n. Este dato crucial alimenta directamente el MÃ³dulo de GestiÃ³n y Aprendizaje."
  
  utter_historial:
  - text: "Consultando el historial... Dame un momento."

  utter_goodbye:
  - text: "Â¡AdiÃ³s! EstarÃ© monitoreando el clima. No dudes en consultarme."
  - text: "Hasta pronto. Recuerda que el agente sigue activo, te avisarÃ© si hay riesgo."


  utter_iamabot:
  - text: "Soy un agente inteligente hÃ­brido diseÃ±ado para detectar condiciones climÃ¡ticas adversas y proteger tu ropa tendida. Fui creado por el Grupo 5 de la ESPE."


  utter_default:
  - text: "Disculpa, no entendÃ­ bien. Â¿PodrÃ­as reformular tu pregunta?"

  utter_ask_rephrase:
  - text: "No estoy seguro de lo que me pides. Â¿PodrÃ­as ser mÃ¡s especÃ­fico sobre la consulta o el ajuste?"

# ----------------- ACTIONS -----------------
actions:
  - action_check_weather_risk
  - action_update_sensitivity
  - action_process_feedback
  - action_retrieve_history